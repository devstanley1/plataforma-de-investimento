<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Retirada - Netflix Invest</title>
    <link rel="stylesheet" href="../assets/styles.css" />
  </head>
  <body class="min-h-screen bg-gray-50">
    <header class="bg-white border-b border-gray-200">
      <div class="site-header max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
        <h1 class="site-logo">
          <img src="../assets/img/banner%202.jpeg" alt="Logo do site" />
        </h1>
        <nav class="top-actions text-sm">
          <a class="top-action" href="#">Suporte online</a>
          <button class="top-action group-button" type="button">Grupo</button>
          <a class="top-action auth-only" href="deposit.html">Recargas</a>
          <a class="top-action auth-only" href="withdraw.html">Retiradas</a>
        </nav>
      </div>
    </header>

    <div id="group-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="group-modal-title">
      <div class="modal-backdrop"></div>
      <div class="modal-card">
        <h2 id="group-modal-title" class="modal-title">Bem-vindo √† Netflix Investimento</h2>
        <p class="modal-text">
          Somos uma empresa dedicada a oferecer uma experi√™ncia de investimento em t√≠tulos Netflix com seguran√ßa,
          transpar√™ncia e retorno di√°rio. Nossa miss√£o √© conectar voc√™ aos melhores filmes e s√©ries licenciados,
          com acompanhamento em tempo real e suporte especializado.
        </p>
        <div class="modal-actions">
          <a class="modal-primary" href="#">Acessar grupo</a>
          <button class="modal-secondary" type="button" data-close-modal>Fechar</button>
        </div>
      </div>
    </div>

    <section class="banner-grid max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <img class="banner-image" src="../assets/img/banner%202.jpeg" alt="Banner Netflix 2" loading="lazy" />
    </section>

    <div class="page-shell">
      <main class="page-content">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <a href="transactions.html" class="text-sm text-blue-600 hover:text-blue-500">‚Üê Voltar</a>
          <h2 class="mt-4 text-2xl font-bold text-gray-900">Retirada</h2>
          <p class="mt-2 text-gray-600">Solicite a retirada para sua conta banc√°ria cadastrada.</p>

          <section class="mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <form id="withdraw-form" class="space-y-4">
              <p id="withdraw-error" class="text-sm text-red-600" style="display:none;"></p>
              <p id="withdraw-success" class="text-sm text-green-600" style="display:none;"></p>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Valor da retirada (R$)</label>
                  <input id="withdraw-amount-input" type="number" min="1" step="0.01" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="0,00" />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de documento</label>
                  <select class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                    <option>CPF</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">CPF</label>
                  <input id="cpf" type="text" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="000.000.000-00" />
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-1">Senha do cadastro (a mesma usada para login)</label>
                  <input id="withdraw-password" type="password" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Digite a senha do cadastro" />
                </div>
              </div>
              <div class="mt-4">
                <button type="submit" class="inline-flex items-center justify-center rounded-md font-medium transition-colors bg-blue-600 text-white hover:bg-blue-700 px-4 py-2 text-sm">Solicitar retirada</button>
              </div>
              <div class="mt-4 bg-gray-50 rounded-lg p-4 text-sm text-gray-600" aria-live="polite">
                <p>Valor solicitado: <strong id="withdraw-amount-display">R$ 0,00</strong></p>
                <p>Taxa de processamento (7%): <strong id="withdraw-fee">R$ 0,00</strong></p>
                <p>Valor a receber: <strong id="withdraw-net">R$ 0,00</strong></p>
              </div>
              <p class="mt-3 text-xs text-gray-500">Certifique-se de ter cadastrado seu banco no Perfil.</p>
            </form>
          </section>
        </div>
      </main>
    </div>

    <nav class="bottom-nav" aria-label="Menu principal">
      <a class="bottom-nav-link" href="products.html">üìä<span>Produtos</span></a>
      <a class="bottom-nav-link" href="transactions.html">üßæ<span>Movimenta√ß√µes</span></a>
      <a class="bottom-nav-link" href="referrals.html">ü§ù<span>Indicar</span></a>
      <a class="bottom-nav-link" href="profile.html">‚öô<span>Perfil</span></a>
    </nav>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../assets/supabase.js"></script>
    <script src="../assets/session.js"></script>
    <script src="../assets/group-modal.js"></script>
    <script>
      function isValidCpf(value) {
        const cpf = String(value || '').replace(/\D/g, '');
        if (!cpf || cpf.length !== 11 || /^([0-9])\1+$/.test(cpf)) return false;

        let sum = 0;
        for (let i = 0; i < 9; i += 1) {
          sum += Number(cpf[i]) * (10 - i);
        }
        let firstCheck = (sum * 10) % 11;
        if (firstCheck === 10) firstCheck = 0;
        if (firstCheck !== Number(cpf[9])) return false;

        sum = 0;
        for (let i = 0; i < 10; i += 1) {
          sum += Number(cpf[i]) * (11 - i);
        }
        let secondCheck = (sum * 10) % 11;
        if (secondCheck === 10) secondCheck = 0;
        return secondCheck === Number(cpf[10]);
      }
    </script>
    <script src="../assets/withdraw.js"></script>
  </body>
</html>
